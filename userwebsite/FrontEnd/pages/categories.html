<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Categories | V Store - Men's Fashion</title>
  <link rel="stylesheet" href="../css/styles.css" />
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    body {
      font-family: 'Inter', sans-serif;
      margin: 0;
      background: var(--bg-color, #f9f9f9);
      color: var(--text-color, #333);
      transition: background-color 0.3s, color 0.3s;
    }

    .page-header {
      padding: 40px 0 20px;
      text-align: center;
    }
    
    .page-header h1 {
      font-size: 2.5rem;
      font-weight: 700;
      margin-bottom: 10px;
      color: var(--text-color, #333);
      transition: color 0.3s;
    }
    
    .page-header p {
      font-size: 1.1rem;
      color: var(--text-color, #666);
      opacity: 0.8;
    }

    .category-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      gap: 24px;
      padding: 20px 0 40px;
    }

    .category-card {
      background: var(--card-bg, #fff);
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease, background 0.3s;
      overflow: hidden;
      text-align: center;
      text-decoration: none;
      color: inherit;
      display: flex;
      flex-direction: column;
    }

    .category-card:hover {
      transform: translateY(-8px);
      box-shadow: 0 8px 24px rgba(0,0,0,0.15);
    }

    .category-card img {
      width: 100%;
      height: 200px;
      object-fit: cover;
      transition: transform 0.3s ease;
    }

    .category-card:hover img {
      transform: scale(1.05);
    }

    .category-card h3 {
      margin: 16px 0;
      font-weight: 600;
      color: var(--text-color, #333);
      transition: color 0.3s ease;
      font-size: 1.1rem;
      padding: 0 16px 16px;
    }

    @media (max-width: 768px) {
      .page-header h1 {
        font-size: 2rem;
      }
      .category-grid {
        grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
        gap: 16px;
      }
      .category-card img {
        height: 160px;
      }
    }
    
    @media (max-width: 480px) {
      .page-header {
        padding: 30px 0 15px;
      }
      .page-header h1 {
        font-size: 1.75rem;
      }
      .category-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 12px;
      }
      .category-card img {
        height: 140px;
      }
      .category-card h3 {
        font-size: 1rem;
        margin: 12px 0;
        padding: 0 12px 12px;
      }
    }
  </style>
</head>
<body>
  <div class="page-wrapper">
    <!-- Header Component (loaded from components/header.html) -->
    <div id="header-placeholder"></div>

    <main style="flex: 1;">
      <div class="container">
        <div class="page-header">
          <h1>ðŸ§¥ Shop by Category</h1>
          <p>Find your perfect style across all fashion essentials.</p>
        </div>

        <div class="category-grid">
          <a href="category.html?name=Casual%20Wear" class="category-card">
            <img src="../assets/products/cs.jpg" alt="Casual Wear" />
            <h3>Casual Wear</h3>
          </a>
          <a href="category.html?name=T-Shirts" class="category-card">
            <img src="../assets/genz/ts.webp" alt="T-Shirts" />
            <h3>T-Shirts</h3>
          </a>
          <a href="category.html?name=Jeans" class="category-card">
            <img src="../assets/genz/Bg.jpg" alt="Jeans" />
            <h3>Jeans</h3>
          </a>
          <a href="category.html?name=Hoodies" class="category-card">
            <img src="../assets/genz/hd.webp" alt="Hoodies" />
            <h3>Hoodies</h3>
          </a>
          <a href="category.html?name=Lowers%20%26%20Joggers" class="category-card">
            <img src="../assets/genz/ls.webp" alt="Lowers & Joggers" />
            <h3>Lowers & Joggers</h3>
          </a>
          <a href="category.html?name=Co-ord%20Sets" class="category-card">
            <img src="../assets/genz/cd.webp" alt="Co-ord Sets" />
            <h3>Co-ord Sets</h3>
          </a>
        </div>
      </div>
    </main>

    <!-- Footer Component (loaded from components/footer.html) -->
    <div id="footer-placeholder" style="width: 100%; margin-top: auto; flex-shrink: 0;"></div>
        </div>

  <!-- Load components first, then app.js -->
  <script src="../js/load-components.js"></script>
  <!-- API Configuration and Integration -->
  <script src="../js/config.js"></script>
  <script src="../js/api.js"></script>
  <script src="../js/app.js"></script>
  <script>
    // Search functionality
    const searchBtn = document.getElementById('searchBtn');
    const searchModal = document.getElementById('searchModal');
    const searchInput = document.getElementById('searchInput');
    const searchClose = document.getElementById('searchClose');
    const searchResults = document.getElementById('searchResults');

    // Product data for search
    const allProducts = [
      { name: 'Colourblocked Polo T-shirt', price: 593, img: 'products.html', brand: 'Allen Solly' },
      { name: 'Pure Cotton Custom Fit Shirt', price: 917, img: 'products.html', brand: 'Allen Solly' },
      { name: 'Polo Collar Slim Fit T-shirt', price: 929, img: 'products.html', brand: 'Louis Philippe Jeans' },
      { name: 'Pure Cotton Casual Shirt', price: 993, img: 'products.html', brand: 'Allen Solly' },
      { name: 'Classic Fit Formal Shirt', price: 849, img: 'products.html', brand: 'Louis Philippe Jeans' },
      { name: 'Regular Fit Cotton T-shirt', price: 699, img: 'products.html', brand: 'Allen Solly' },
      { name: 'Slim Fit Cotton Shirt', price: 799, img: 'products.html', brand: 'Louis Philippe Jeans' },
      { name: 'Oversized Graphic Tee', price: 499, img: 'featured.html', brand: 'V Store' },
      { name: 'Minimalist Hoodie', price: 799, img: 'featured.html', brand: 'V Store' },
      { name: 'Baggy Fit Jeans', price: 999, img: 'featured.html', brand: 'V Store' },
      { name: 'Co-ord Set', price: 1199, img: 'featured.html', brand: 'V Store' }
    ];

    function performSearch(query) {
      const lowerQuery = query.toLowerCase().trim();
      if (lowerQuery === '') {
        searchResults.innerHTML = '';
        return;
      }

      const filtered = allProducts.filter(p => 
        p.name.toLowerCase().includes(lowerQuery) ||
        p.brand.toLowerCase().includes(lowerQuery)
      );

      searchResults.innerHTML = '';
      
      if (filtered.length === 0) {
        searchResults.innerHTML = '<div style="text-align: center; padding: 20px; color: var(--text-color, #666);">No products found</div>';
        return;
      }

      filtered.forEach(product => {
        const item = document.createElement('div');
        item.style.cssText = 'padding: 12px; border-bottom: 1px solid rgba(0,0,0,0.1); cursor: pointer; transition: background-color 0.2s; display: flex; align-items: center; gap: 12px;';
        item.innerHTML = `
          <div style="flex: 1;">
            <h4 style="margin: 0 0 4px 0; color: var(--text-color, #333); font-size: 1rem;">${product.name}</h4>
            <p style="margin: 0; color: #e53935; font-weight: 600; font-size: 0.9rem;">â‚¹${product.price}</p>
            <p style="margin: 4px 0 0 0; color: var(--text-color, #666); font-size: 0.85rem;">${product.brand}</p>
          </div>
        `;
        item.addEventListener('mouseenter', () => {
          item.style.background = 'var(--muted-white, #f5f5f5)';
        });
        item.addEventListener('mouseleave', () => {
          item.style.background = 'transparent';
        });
        item.addEventListener('click', () => {
          window.location.href = product.img;
          searchModal.style.display = 'none';
          searchInput.value = '';
          searchResults.innerHTML = '';
        });
        searchResults.appendChild(item);
      });
    }

    if (searchBtn) {
      searchBtn.addEventListener('click', () => {
        searchModal.style.display = 'flex';
        setTimeout(() => searchInput.focus(), 100);
      });
    }

    if (searchClose) {
      searchClose.addEventListener('click', () => {
        searchModal.style.display = 'none';
        searchInput.value = '';
        searchResults.innerHTML = '';
      });
    }

    if (searchModal) {
      searchModal.addEventListener('click', (e) => {
        if (e.target === searchModal) {
          searchModal.style.display = 'none';
          searchInput.value = '';
          searchResults.innerHTML = '';
        }
      });
    }

    if (searchInput) {
      searchInput.addEventListener('input', (e) => {
        performSearch(e.target.value);
      });
      searchInput.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') {
          searchModal.style.display = 'none';
          searchInput.value = '';
          searchResults.innerHTML = '';
        }
      });
    }

    // Mobile Menu Toggle
    const mobileMenuBtn = document.getElementById("mobileMenuBtn");
    const mobileNav = document.getElementById("mobileNav");
    if (mobileMenuBtn && mobileNav) {
      mobileMenuBtn.addEventListener("click", () => {
        mobileNav.classList.toggle("active");
      });
      document.addEventListener("click", (e) => {
        if (!mobileMenuBtn.contains(e.target) && !mobileNav.contains(e.target)) {
          mobileNav.classList.remove("active");
        }
      });
      mobileNav.querySelectorAll(".nav-item").forEach(item => {
        item.addEventListener("click", () => {
          mobileNav.classList.remove("active");
        });
      });
    }

    // Profile Sidebar Toggle
    const profileSidebar = document.getElementById('profileSidebar');
    const profileSidebarOverlay = document.getElementById('profileSidebarOverlay');
    const profileSidebarClose = document.getElementById('profileSidebarClose');
    const loginDropdownBtn = document.getElementById('loginDropdownBtn');
    const loginDropdown = document.getElementById('loginDropdown');
    const lightModeBtn = document.getElementById('lightModeBtn');
    const sidebarLightModeBtn = document.getElementById('sidebarLightMode');

    function openProfileSidebar() {
      if (profileSidebar) {
        profileSidebar.classList.add('active');
        if (profileSidebarOverlay) {
          profileSidebarOverlay.classList.add('active');
        }
        document.body.style.overflow = 'hidden';
      }
    }

    function closeProfileSidebar() {
      if (profileSidebar) {
        profileSidebar.classList.remove('active');
        if (profileSidebarOverlay) {
          profileSidebarOverlay.classList.remove('active');
        }
        document.body.style.overflow = '';
      }
    }

    // Open sidebar when clicking profile button
    if (loginDropdownBtn) {
      loginDropdownBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        e.preventDefault();
        openProfileSidebar();
      });
    }

    // Close sidebar
    if (profileSidebarClose) {
      profileSidebarClose.addEventListener('click', () => {
        closeProfileSidebar();
      });
    }

    // Close sidebar when clicking overlay
    if (profileSidebarOverlay) {
      profileSidebarOverlay.addEventListener('click', () => {
        closeProfileSidebar();
      });
    }

    // Close sidebar on escape key
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape' && profileSidebar && profileSidebar.classList.contains('active')) {
        closeProfileSidebar();
      }
    });

    // Light Mode toggle from sidebar
    if (sidebarLightModeBtn) {
      sidebarLightModeBtn.addEventListener('click', (e) => {
        e.stopPropagation();
        const darkModeSwitch = document.getElementById('dark-mode-switch');
        if (darkModeSwitch) {
          darkModeSwitch.checked = !darkModeSwitch.checked;
          darkModeSwitch.dispatchEvent(new Event('change'));
        }
      });
    }

    // Light Mode toggle from dropdown (if exists)
    if (lightModeBtn) {
      lightModeBtn.addEventListener('click', () => {
        const darkModeSwitch = document.getElementById('dark-mode-switch');
        if (darkModeSwitch) {
          darkModeSwitch.checked = !darkModeSwitch.checked;
          darkModeSwitch.dispatchEvent(new Event('change'));
        }
      });
    }

    // Update Light Mode text based on current theme (optimized)
    function updateLightModeText() {
      const lightModeText = document.getElementById('lightModeText');
      const sidebarLightModeText = document.getElementById('sidebarLightModeText');
      const isDarkMode = document.body.classList.contains('dark-mode');
      const text = isDarkMode ? 'Light Mode' : 'Dark Mode';
      
      if (lightModeText) {
        lightModeText.textContent = text;
      }
      if (sidebarLightModeText) {
        sidebarLightModeText.textContent = text;
      }
    }

    // Update on theme change (wait for app.js to initialize first)
    function setupLightModeTextUpdate() {
      const darkModeSwitch = document.getElementById('dark-mode-switch');
      if (!darkModeSwitch) {
        setTimeout(setupLightModeTextUpdate, 50);
        return;
      }
      darkModeSwitch.addEventListener('change', function() {
        requestAnimationFrame(updateLightModeText);
      });
      updateLightModeText();
    }
    
    if (document.readyState === 'loading') {
      document.addEventListener('DOMContentLoaded', () => {
        setTimeout(setupLightModeTextUpdate, 150);
      });
    } else {
      setTimeout(setupLightModeTextUpdate, 150);
    }

    // Close sidebar when clicking menu items (except light mode toggle)
    const sidebarMenuItems = document.querySelectorAll('.profile-sidebar-item');
    sidebarMenuItems.forEach(item => {
      if (item.id !== 'sidebarLightMode') {
        item.addEventListener('click', () => {
          setTimeout(() => {
            closeProfileSidebar();
          }, 100);
        });
      }
    });
  </script>
</body>
</html>
